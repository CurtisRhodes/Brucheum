<!DOCTYPE html>
<html lang="en">
<head>
    <title>Welcome - OggleBooble</title>
    <link rel='shortcut icon' href='Images/favicon.png' type='image/x-icon' />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=.07">
    <meta http-equiv="cache-control" content="max-age=0">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="-1">
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 11:00:00 GMT">
    <meta http-equiv="pragma" content="no-cache">
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.11.1/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.12/summernote.js"></script>
    <script src="Scripts/Common.js"></script>
    <script src="Scripts/HitCounter.v2.js"></script>
    <script src="Scripts/OggleEventLog.js"></script>
    <script src="Scripts/Login.js"></script>
    <script src="Scripts/OggleHeader.js"></script>
    <script src="Scripts/OggleSearch.js"></script>
    <script src="Scripts/OggleFooter.js"></script>
    <script src="Scripts/Permissions.js"></script>
    <script src="Scripts/Carousel.js"></script>
    <script src="Scripts/DirTree.js"></script>
    <script src="Scripts/FolderCategoryDialog.js"></script>
    <script src="Scripts/ModelInfoDialog.js"></script>
    <script src="Scripts/ImageCommentDialog.js"></script>
    <script src="Scripts/MoveCopyArchive.js"></script>
    <script src="Scripts/MetaTagDialog.js"></script>
    <link href="Styles/bootstrap.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.12/summernote.css" rel="stylesheet">
    <link href="Styles/jqueryUI.css" rel="stylesheet">
    <link href="Styles/Common.css" rel="stylesheet">
    <link href="Styles/loginDialog.css" rel="stylesheet">
    <link href="Styles/Header.css" rel="stylesheet">
    <link href="Styles/Carousel.css" rel="stylesheet">
    <link href="Styles/ImagePage.css" rel="stylesheet">
    <link href="Styles/MoveCopyArchiveDialog.css" rel="stylesheet">
    <link href="Styles/ModelInfoDialog.css" rel="stylesheet">
    <link href="Styles/ImageCommentDialog.css" rel="stylesheet">
    <link href="Styles/MetaTagDialog.css" rel="stylesheet">

    <!--<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-1620126417602146",
            enable_page_level_ads: true
        });
    </script>-->
    <style>
        .newsSection {
            border: solid thin red;
            padding: 3px;
            /*background-color: #988519;*/
            background-color: var(--oggleContainerBackgroundColor);
            display: none;
            justify-items:center;            
            text-align:justify;
        }

        .newsContentBox {
            display: inline-block;
            margin: 2px;
            background-color: #3b0e56;
            height: 280px;
        }

        .floatingContainerElement {
            position: absolute;
        }

        .carouselContainer {
            padding: 2px;
        }
        .carouselShell {
            position: absolute;
            left: 50%;
        }
        .carouselInternals {
            position: relative;
            left: -50%;
            min-height: 200px;
        }

        .carouselImage {
            height: 500px;
            width: 800px;
            cursor: pointer;
        }
        .newsContentBoxLabel {
            position: absolute;
            display: inline-block;
            padding: 1px 12px 2px 30px;
            padding: 2px;
            background-color:rgba(178, 0, 255, 0.66);
            color: #d6fcfa;
        }
        .newsContentBoxImage {
            height: 272px;
            cursor: pointer;
        }
        .newsContentBoxDateLabel {
            position: relative;
            bottom: 2px;
            color: #d6fcfa;
            background-color: #686666;
        }

        .floatBelow {
            margin-top: 559px;
        }

        .slideshowCheckboxes {
            position:absolute;
            bottom: 1px;
            right: -41px;            
        }


    </style>
</head>
<body>
    <header></header>
    <div class="threeColumnLayout">
        <div id="leftColumn">
            <div id="boobsLeftColumnList" class="leftColumnList">
                <!--<div onclick="rtpe('LMC',3908,'boobTransitions');">Transitions</div>-->
                <div onclick="rtpe('LMC',3908,'boobsRanker');">Boobs Ranker</div>
                <!--<div onclick="rtpe('LMC',3908,'explainBoobs');">Let me Explain</div>-->
                <div onclick="rtpe('LMC',3908,'dirTreeBoobs');">Category List</div>
                <div onclick="rtpe('LMC',3908,'centerfolds');">Playboy Centerfolds</div>
                <!--<div onclick="rtpe('LMC',3908,'video');">Video</div>-->
                <div onclick="rtpe('LMC',3908,'porn');">Nasty Porn</div>
                <div onclick="rtpe('LMC',0,'blog');">Blog</div>
                <!--<div onclick="window.location.href='/home/Mobile?folder=boobs'">Mobile</div>-->
            </div>
            <div id="pornLeftColumnList" class="leftColumnList">
                <div onclick="rtpe('LMC',3909,'back');">back to boobs</div><br />
                <!--<div onclick="rtpe('LMC',3909,'pornTransitions');">Transition down</div>-->
                <div onclick="rtpe('LMC',3909,'pornRanker');">Nastieness Ranker</div>
                <!--<div onclick="rtpe('LMC',3909,'explainPorn');">Let me Explain</div>-->
                <div onclick="rtpe('LMC',3909,'dirTreePorn');">Category List</div>
                <!--<div onclick="rtpe('LMC',3909,'back');">back to boobs</div>-->
                <!--<div onclick="rtpe('LMC',3909,'blog');">Blog</div>-->
                <!--<div onclick="window.location.href='/home/Mobile?folder=boobs'">Mobile</div>-->
            </div>
        </div>
        <div id="middleColumn">
            <div id="divStatusMessage"></div>
            <div id='notConnectMessage' class='displayHidden customMessageContainer'></div>
            <div id="dots"></div>
            <div>
                <div style="display:block;">
                    <div class="indexSectionLabel floatingContainerElement">random galleries</div>
                    <div class="carouselContainer">
                        <div class="carouselShell">
                            <div id="laCarousel" class="carouselInternals flexContainer">
                                <div onclick="assuranceArrowClick('back')"><img class="assuranceArrows" src="/Images/leftArrowOpaque02.png" /></div>
                                <div class="carouselImageContainer">
                                    <div id="categoryTitle" class="floatingLabel" onmouseover="slowlyShowFolderCategoryDialog(carouselItemArray[imageIndex].FolderId); forgetShowingCatDialog=false;" onmouseout="forgetShowingCatDialog=true;"></div>

                                    <img id="thisCarouselImage" oncontextmenu="carouselContextMenuClick()" class="carouselImage" src="/Images/redballon.png" onclick="clickViewGallery()" />


                                    <div class="imgBottom">
                                        <img class="speedButton floatLeft" src="Images/speedDialSlower.png" title="slower" onclick="clickSpeed('slower')" />
                                        <div id="pauseButton" class='pauseButton' onclick="togglePause()">||</div>
                                        <div id='categoryLabel' class='carouselCategoryLabel' onclick="clickViewParentGallery()"></div>
                                        <img class="speedButton floatRight" src="Images/speedDialFaster.png" title="faster" onclick="clickSpeed('faster')" />
                                    </div>
                                </div>
                                <div onclick="assuranceArrowClick('foward')"><img class="assuranceArrows" src="/Images/rightArrowOpaque02.png" /></div>
                                <div id="carouselInclude" class="slideshowCheckboxes">
                                    <div id="includeCenterfoldsCheckbox" class="galleryCheckBox"><input type="checkbox" onchange="addToCarousel('playboy', $(this).is(':checked'))" /> Include Centerfolds</div>
                                    <div class="galleryCheckBox"><input type="checkbox" onchange="addToCarousel('archive', $(this).is(':checked'))" /> Include Archive</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="floatBelow">
                    <div class="indexSectionLabel">latest updates</div>
                    <div id="newsSection" class="newsSection ">

                    </div>

                    <div class="floatLeft">
                        <div class="centeredDivShell randomImageContainer">
                            <div class="centeredDivInner">
                                <div id="connectingMsg" class="displayHidden"><img src="https://media.giphy.com/media/ZFiRiRg60SjhipvdCz/giphy.gif" /></div>
                                <!--<div id="connectingMsg"><img src="https://media.giphy.com/media/ls5bix63j3H53E1Ebp/giphy.gif" /></div>-->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="rightColumn"></div>
    </div>
    <footer></footer>

    <div id="carouselContextMenu" class="ogContextMenu" onmouseleave="considerHidingContextMenu()">
        <div id="ctxModelName" onclick="carouselContextMenuAction('showDialog')">model name</div>
        <div id="ctxSeeMore" onclick="carouselContextMenuAction('seeMore')">See More</div>
        <div onclick="carouselContextMenuAction('explode')">Explode</div>
        <div onclick="carouselContextMenuAction('comment')">Comment</div>
        <div onclick="carouselContextMenuAction('tags')">Tags</div>
        <div id="ctxMove" onclick="carouselContextMenuAction('archive')">Archive</div>
    </div>

    <div id="dirTreeContainer" class="treeContainer"></div>
    <div id="promoContainer" class="ogglePromoContainer">
        <div id="promoContainerTitle" class="ogglePromoTitle"></div>
        <div id="promoContainerText" class="ogglePromoText"></div>
        <div onclick="killPromoMessages()" class="tinyDots" onmouseover="$('#killPromoPrompt').show()" onmouseout="$('#killPromoPrompt').hide()">...</div>
        <div id="killPromoPrompt" class="ogglePromoKillMessage">had enough promo messages?</div>
    </div>
    <div w3-include-html="Snippets/AdminDialogs.html"></div>
    <div w3-include-html="Snippets/Login.html"></div>
    <div w3-include-html="Snippets/Register.html"></div>

    <script>
        var promoIdx = 0;
        var promoMessagesArray = new Array();
        var promoMessageRotator;
        var promoMessageRotationSpeed = 15000;
        var subdomain;
        var homePageId = 3908;
        $(document).ready(function () {
            includeHTML();
            $('#laCarousel').hide();
            $('#carouselInclude').hide();
            $('.indexSectionLabel').hide();
            //$('#footerLastBuild').html("last build: " + lastBuild + "3");
            $('#footerMessage').html("loading settings");
            params = getParams();
            if (params.subdomain === undefined)
                subdomain = "boobs";
            else
                subdomain = params.subdomain;
            if (subdomain == "porn") 
                homePageId = 3909;

            setOggleFooter(subdomain, homePageId);
            loadSettings();
            var dots = ""
            setTimeout(function () {
                if (connectionNotVerified)
                    $('#connectingMsg').show();
            }, 3000);
            var waiter = setInterval(function () {
                if (settingsArray.ApiServer === undefined) {
                    dots += "~ ";
                    $('#dots').html(dots);
                    //console.log("loadSettings: " + settingsArray.ApiServer);
                }
                else {
                    clearInterval(waiter);
                    $('#dots').html("");
                    verifyConnection("index.html");
                    //$('#footerMessage').html("loading header");
                    var verifyConnectionWaiter = setInterval(function () {
                        if (connectionNotVerified) {
                            dots += ". ";
                            $('#dots').html(dots);
                            //console.log("connectionNotVerified: " + connectionNotVerified);
                        }
                        else {
                            clearInterval(verifyConnectionWaiter);
                            $('#dots').html('');
                            $('#connectingMsg').hide();
                            $('#laCarousel').fadeIn();
                            loadNewsBoxes(40);
                            launchCarousel(subdomain);
                            setOggleHeader(homePageId);
                            logPageHit(homePageId, "Index");
                            $('#indexPageCatTreeContainer').dialog('option', 'title', subdomain);
                            if (subdomain == "porn") {
                                $('#pornLeftColumnList').show();
                                $('#includeCenterfoldsCheckbox').hide();
                            }
                            else {
                                $('#boobsLeftColumnList').show();
                                //launchPromoMessages();
                            }
                            if (isInRole("Oggle admin")) {
                                $('#carouselInclude').show();
                            }
                            $('#carouselInclude').show();
                        }
                    }, 300);
                }
            }, 300);
            window.addEventListener("resize", resizeIndexPage);
            resizeIndexPage();
        });

        $.date = function (dateObject) {
            var d = new Date(dateObject);
            var day = d.getDate();
            var month = d.getMonth() + 1;
            var year = d.getFullYear();
            if (day < 10) {
                day = "0" + day;
            }
            if (month < 10) {
                month = "0" + month;
            }
            var date = month + "/" + day + "/" + year;

            return date;
        };

        function loadNewsBoxes(numItmes) {
            $.ajax({
                type: "GET",
                url: settingsArray.ApiServer + "api/ImagePage/GetLatestUpdates?items=" + numItmes,
                success: function (latestUpdates) {
                    if (latestUpdates.Success === "ok") {
                        $.each(latestUpdates.LatestUpdates, function (idx, LatestUpdate) {
                            $('#newsSection').append("<div class='newsContentBox'>" +
                                "<div class='newsContentBoxLabel'>" + LatestUpdate.FolderName + "</div>" +
                                "<img class='newsContentBoxImage' src='" + LatestUpdate.FolderImage + "'" +
                                "onclick='rtpe(\"LUP\",\"home page\"," + LatestUpdate.FolderId + ")'/>" +
                                //rtpe(eventCode, calledFrom, eventDetail)
                                //"onclick='javascript:window.location.href=\"/album.html?folder=" + LatestUpdate.FolderId + "\";'/>" +
                                "<div class='newsContentBoxDateLabel'>updated: " + $.date(LatestUpdate.LastModified) + "</span></div>" +
                                "</div>");
                        });
                        console.log("loaded " + latestUpdates.LatestUpdates.length + " news boxes");
                        $('.indexSectionLabel').show();
                    }
                    else {
                        //alert("loadImages: " + carouselInfo.Success);
                        logError({
                            VisitorId: getCookieValue("VisitorId"),
                            ActivityCode: "ERR",
                            Severity: 12,
                            ErrorMessage: latestUpdates.Success,
                            CalledFrom: "loadNewsBoxes"
                        });
                        //sendEmailToYourself("Error in Caraousel/loadImages", carouselInfo.Success);
                    }
                },
                error: function (jqXHR) {
                    var errorMessage = getXHRErrorDetails(jqXHR);
                    if (!checkFor404(errorMessage, "loadImages")) {
                        logError({
                            VisitorId: getCookieValue("VisitorId"),
                            ActivityCode: "XHR",
                            Severity: 1,
                            ErrorMessage: errorMessage,
                            CalledFrom: "HitCounter.js getVisitorIdFromIp"
                        });
                        //sendEmailToYourself("XHR ERROR IN Carousel.JS loadImages", "api/Carousel/GetLinks?root=" + rootFolder + "&skip=" + skip + "&take=" + take +
                        //    "  Message: " + errorMessage);
                    }
                }
            });
            resizeIndexPage();
        }

        function resizeIndexPage() {
            resizePage();

            $('#middleColumn').height($('#middleColumn').height() + $('#newsSection').height());
            $('.assuranceArrows').height($('.carouselImageContainer').height());

            //var carouselPadding = ($('#middleColumn').width() - $('#newsSection').width()) * .464;
            //$('#laCarousel').css("padding-left", carouselPadding);
            //console.log("resizeIndexPage carousel padding: " + carouselPadding)

        }

        function addToCarousel(root, isChecked) {
            if (root == "archive") {
                if (subdomain == "porn")
                    root = "sluts";
            }
            loadImages(root, isChecked, 0, 50000);
        }

        function launchPromoMessages() {
            $.ajax({
                type: "GET",
                url: settingsArray.ApiServer + "/api/OggleBlog/GetBlogList?commentType=PRO",
                success: function (blogCommentsContainer) {
                    if (blogCommentsContainer.Success == "ok") {
                        $.each(blogCommentsContainer.blogComments, function (idx, blogComment) {
                            promoMessagesArray.push({
                                FolderId: blogComment.Id,
                                Link: blogComment.Link,
                                CommentTitle: blogComment.CommentTitle,
                                CommentText: blogComment.CommentText
                            });
                        });
                        showPromoMessages();
                    }
                    else {
                        $('#blogLoadingGif').hide();
                        sendEmailToYourself("FAIL in Index.Html launchPromoMessages", "/api/OggleBlog/GetBlogList?commentType=PRO" +
                            "<br/>Called from: " + getCookieValue("IpAddress") + "<br/>Message: " + blogCommentsContainer.Success);
                        //alert("loadPromoMessages: " + blogCommentsContainer.Success)
                    }
                },
                error: function (jqXHR) {
                    $('#blogLoadingGif').hide();
                    $('#imagePageLoadingGif').hide();
                    var errorMessage = getXHRErrorDetails(jqXHR);
                    if (!checkFor404(errorMessage, "launchPromoMessages")) {
                        sendEmailToYourself("XHR ERROR in Index.Html launchPromoMessages ", "/api/OggleBlog/GetBlogList?commentType=PRO" +
                            "Called from: " + getCookieValue("IpAddress") + "  folderId: " + folderId + " Message: " + errorMessage);
                    }
                    //alert("launchPromoMessages jqXHR : " + getXHRErrorDetails(jqXHR, exception) + "settingsArray.ApiServer: " + settingsArray.ApiServer);
                }
            });
        }

        function showPromoMessages() {
            $('#promoContainer').fadeIn();
            var currentItem = promoMessagesArray[promoIdx];
            $('#promoContainerTitle').html(currentItem.CommentTitle);
            $('#promoContainerText').html(currentItem.CommentText);

            promoMessageRotator = setInterval(function () {

                if (promoIdx === promoMessagesArray.length) {
                    promoIdx = 0;
                }
                currentItem = promoMessagesArray[promoIdx];
                $('#promoContainerTitle').html(currentItem.CommentTitle);
                $('#promoContainerText').html(currentItem.CommentText);
                promoIdx++;
            }, promoMessageRotationSpeed);
        }

        function killPromoMessages() {
            $('#promoContainer').fadeOut();
            clearInterval(promoMessageRotator);
            setInterval(function () { showPromoMessages() }, 30000);
        }

        function goToPorn() {

            //if(hasPorn)
            //if (document.domain === 'localhost') alert("goToPorn()");

            // if user porn status not already set
            showCustomMessage(35);
        }

    </script>
</body>
</html>
