<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome - OggleBooble</title>
    <link rel='shortcut icon' href='Images/favicon.png' type='image/x-icon' />

    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.11.1/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.12/summernote.js"></script>
    <script src="Scripts/Login.js"></script>
    <script src="Scripts/Common.js"></script>
    <script src="Scripts/Carousel.js"></script>
    <script src="Scripts/DirTree.js"></script>
    <script src="Scripts/FolderCategoryDialog.js"></script>
    <script src="Scripts/ModelInfoDialog.js"></script>
    <script src="Scripts/ImageCommentDialog.js"></script>
    <script src="Scripts/MoveCopyArchive.js"></script>
    <script src="Scripts/MetaTagDialog.js"></script>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.12/summernote.css" rel="stylesheet">
    <link href="Styles/jqueryUI.css" rel="stylesheet">
    <link href="Styles/Common.css" rel="stylesheet">
    <link href="Styles/loginDialog.css" rel="stylesheet">
    <link href="Styles/Header.css" rel="stylesheet">
    <link href="Styles/Carousel.css" rel="stylesheet">
    <link href="Styles/ImagePage.css" rel="stylesheet">
    <link href="Styles/MoveCopyArchiveDialog.css" rel="stylesheet">
    <link href="Styles/ModelInfoDialog.css" rel="stylesheet">
    <link href="Styles/ImageCommentDialog.css" rel="stylesheet">
    <link href="Styles/MetaTagDialog.css" rel="stylesheet">
</head>
<body>
    <div>
        <header></header>
        <div class="threeColumnLayout">
            <div id="leftColumn">
                <div id="boobsLeftColumnList" class="leftColumnList">
                    <div onclick="window.location.href='/home/transitions?folder=boobs'">Transitions</div>
                    <div onclick="window.location.href='Ranker.html'">Boobs Rater</div>
                    <div onclick="showCustomMessage(38)">Let me Explain</div>
                    <div onclick="showCatListDialog()">Category List</div>
                    <div onclick="window.location.href='/album.html?folder=1132'">Every Playboy Centerfold</div>
                    <div onclick="window.location.href='/Blog.html'">Blog</div>
                    <!--<div onclick="window.location.href='/home/Mobile?folder=boobs'">Mobile</div>-->
                    <div onclick="showCustomMessage(35)">Nasty Porn</div>
                </div>
                <div id="pornLeftColumnList" class="leftColumnList">
                    <div onclick="window.location.href='/'">Tits</div>
                    <div onclick="showCatListDialog()">Category List</div>
                    <div onclick="window.location.href='/Blog.html'">Blog</div>
                    <!--<div onclick="window.location.href='/home/Mobile?folder=boobs'">Mobile</div>-->
                </div>
            </div>
            <div id="middleColumn">
                <div id="customMessage" class="displayHidden customMessageContainer"></div>
                <div id="divStatusMessage"></div>
                <div id="dots"></div>
                <div class="flexContainer">
                    <div class="floatLeft">
                        <div id="includeCenterfoldsCheckbox" class="galleryCheckBox"><input type="checkbox" onchange="addToCarousel('playboy', $(this).is(':checked'))" /> Include Centerfolds</div>
                        <div class="galleryCheckBox"><input type="checkbox" onchange="addToCarousel('archive', $(this).is(':checked'))" /> Include Archive</div>
                        <div id="dots"></div>
                    </div>
                    <div class="floatLeft" id="carousel">
                        <div class="centeredDivShell randomImageContainer">
                            <div class="centeredDivInner">
                                <!--<div id="categoryTitle" class="floatingLabel" onmouseover="slowlyShowFolderCategoryDialog(); forgetShowingCatDialog=false;" onmouseout="forgetShowingCatDialog=true;"></div>-->
                                <div id="categoryTitle" class="floatingLabel" onmouseover="slowlyShowFolderCategoryDialog(carouselItemArray[imageIndex].FolderId); forgetShowingCatDialog=false;" onmouseout="forgetShowingCatDialog=true;"></div>
                                <div id="laCarousel" class="carouselContainer">
                                    <div class="carouselImageContainer">
                                        <img id="thisCarouselImage" oncontextmenu="carouselContextMenu()" class="carouselImage" src="Images/ingranaggi3.gif" onclick="clickViewGallery()" />
                                        <div class="imgBottom">
                                            <img class="speedButton floatLeft" src="Images/speedDialSlower.png" title="slower" onclick="clickSpeed('slower')" />
                                            <div id="pauseButton" class='pauseButton' onclick="togglePause()">||</div>
                                            <div id='categoryLabel' class='carouselCategoryLabel' onclick="clickViewParentGallery()"></div>
                                            <img class="speedButton floatRight" src="Images/speedDialFaster.png" title="faster" onclick="clickSpeed('faster')" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="rightColumn"></div>
        </div>

        <div id="carouselContextMenu" class="ogContextMenu" onmouseleave="considerHidingContextMenu()">
            <div id="ctxModelName" onclick="carouselContextMenuAction('showDialog')">model name</div>
            <div id="ctxSeeMore" onclick="carouselContextMenuAction('seeMore')">See More</div>
            <div onclick="carouselContextMenuAction('explode')">Explode</div>
            <div onclick="carouselContextMenuAction('comment')">Comment</div>
            <div onclick="carouselContextMenuAction('tags')">Tags</div>
            <div id="ctxMove" onclick="carouselContextMenuAction('archive')">Archive</div>
        </div>

        <div id="dirTreeContainer" class="treeContainer"></div>
        <div id="promoContainer" class="ogglePromoContainer">
            <div id="promoContainerTitle" class="ogglePromoTitle"></div>
            <div id="promoContainerText" class="ogglePromoText"></div>
            <div onclick="killPromoMessages()" class="tinyDots" onmouseover="$('#killPromoPrompt').show()" onmouseout="$('#killPromoPrompt').hide()">...</div>
            <div id="killPromoPrompt" class="ogglePromoKillMessage">had enough promo messages?</div>
        </div>
        <div id="indexCatTreeContainer" class="oggleHidden"></div>
    </div>

    <div w3-include-html="Snippets/BoobsFooter.html"></div>
    <div w3-include-html="Snippets/AdminDialogs.html"></div>
    <div w3-include-html="Snippets/Login.html"></div>
    <div w3-include-html="Snippets/Register.html"></div>

    <script>
        var promoIdx = 0;
        var promoMessagesArray = new Array();
        var promoMessageRotator;
        var promoMessageRotationSpeed = 8000;
        var subdomain;
        var permissionsSet = false;
        var isPornEditor = false;

        $(document).ready(function () {
            includeHTML();

            //$('#footerLastBuild').html("last build: " + lastBuild + "3");
            params = getParams();
            if (params.subdomain == undefined)
                subdomain = "boobs";
            else
                subdomain = params.subdomain;

            getHeader(subdomain);

            var dots = ""
            var waiter = setInterval(function () {
                if (settingsArray.ApiServer === undefined) {
                    dots += ". ";
                    $('#dots').html(dots);
                }
                else {
                    $('#dots').html('');
                    clearInterval(waiter);
                    launchCarousel(subdomain);
                    logVisit();
                    if (subdomain == "porn") {
                        $('#pornLeftColumnList').show();
                        $('#boobsLeftColumnList').hide();
                        $('#indexPageCatTreeContainer').dialog('option', 'title', "porn");
                        $('body').addClass('pornBodyColors');
                        $('#includeCenterfoldsCheckbox').hide();
                    }
                    else {
                        $('#indexPageCatTreeContainer').dialog('option', 'title', "boobs");
                        $('#boobsLeftColumnList').show();
                        $('#pornLeftColumnList').hide();
                        launchPromoMessages();
                    }
                    setUserPermissions();
                    var waiter2 = setInterval(function () {
                        dots += "* ";
                        $('#dots').html(dots);
                        if (permissionsSet === true) {
                            clearInterval(waiter2);
                            $('#dots').html("");
                            $('#footerMessage').html("isPornEditor: " + isPornEditor);
                            //if (!isPornEditor)
                            //    directToStaticPage(params.folder);
                            //else {
                            //    getAlbumPageHeader(params.folder);
                            //    getAlbumImages(params.folder);
                            //}
                        }
                    }, 300);
                }
            }, 300);

            $('#indexCatTreeContainer').dialog({
                autoOpen: false,
                show: { effect: "fade" },
                hide: { effect: "blind" },
                position: ({ my: 'left top', at: 'left top', of: $('#middleColumn') }),
                width: 411,
                height: 600
            });
            resizePage();
        });

        function addToCarousel(root, isChecked) {
            if (root == "archive") {
                if (subdomain == "porn")
                    root = "sluts";
            }
            loadImages(root, isChecked, 0, 50000);
        }

        function launchPromoMessages() {
            $.ajax({
                type: "GET",
                url: settingsArray.ApiServer + "/api/OggleBlog/GetBlogList?commentType=PRO",
                success: function (blogCommentsContainer) {
                    if (blogCommentsContainer.Success == "ok") {
                        $.each(blogCommentsContainer.blogComments, function (idx, blogComment) {
                            promoMessagesArray.push({
                                FolderId: blogComment.Id,
                                Link: blogComment.Link,
                                CommentTitle: blogComment.CommentTitle,
                                CommentText: blogComment.CommentText
                            });
                        });
                        showPromoMessages();
                    }
                    else {
                        $('#blogLoadingGif').hide();
                        alert("loadPromoMessages: " + blogCommentsContainer.Success)
                    }
                },
                error: function (jqXHR, exception) {
                    $('#blogLoadingGif').hide();
                    alert("launchPromoMessages jqXHR : " + getXHRErrorDetails(jqXHR, exception) + "settingsArray.ApiServer: " + settingsArray.ApiServer);
                }
            });
        }

        function showPromoMessages() {
            $('#promoContainer').fadeIn();
            var currentItem = promoMessagesArray[promoIdx];
            $('#promoContainerTitle').html(currentItem.CommentTitle);
            $('#promoContainerText').html(currentItem.CommentText);

            promoMessageRotator = setInterval(function () {

                if (promoIdx === promoMessagesArray.length) {
                    promoIdx = 0;
                }
                currentItem = promoMessagesArray[promoIdx];
                $('#promoContainerTitle').html(currentItem.CommentTitle);
                $('#promoContainerText').html(currentItem.CommentText);
                promoIdx++;
            }, promoMessageRotationSpeed);
        }

        function killPromoMessages() {
            $('#promoContainer').fadeOut();
            clearInterval(promoMessageRotator);
            setInterval(function () { showPromoMessages() }, 30000);
        }

        function showCustomMessage(blogId) {
            if (typeof pause === 'function') {
                pause();
            }
            $.ajax({
                type: "GET",
                url: settingsArray.ApiServer + "api/OggleBlog/?blogId=" + blogId,
                success: function (entry) {
                    if (entry.Success === "ok") {
                        $('#customMessage').html(entry.CommentText).show();
                    }
                    else
                        alert(entry.Success);
                },
                error: function (xhr) {
                    alert("showSiteContent xhr: " + getXHRErrorDetails(xhr));
                }
            });
            //if ($('#pornWarning').html() == "")
        }

        function letemPorn(response) {
            // record hit
            //alert("letemPorn: " + response);
            if (response == "ok") {
                window.location.href = '/index.html?subdomain=porn';
            }
            else {
                $('#customMessage').hide();
                if (typeof resume === 'function') {
                    resume();
                }
            }
        }

        function showCatListDialog() {
            var startFolder = 2;
            if (subdomain === "porn") {
                startFolder = 242;
            }

            buildDirTree($('#indexCatTreeContainer'), "indexCatTreeContainer", startFolder);
            $('#indexCatTreeContainer').dialog('open');
            $('#indexCatTreeContainer').dialog('option', 'title', subdomain);
        }

        function indexCatTreeContainerClick(path, id, treeId) {
            if (treeId == "indexCatTreeContainer") {
                window.location.href = "/album.html?folder=" + id;
                $('#indexCatTreeContainer').dialog('close')
            }
            else
                alert("dirTreeClick treeId: " + treeId);
        }
    </script>
</body>
</html>
