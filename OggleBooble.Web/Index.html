<!DOCTYPE html>
<html lang="en">
<head>
    <title>Welcome - OggleBooble</title>
    <link rel='shortcut icon' href='Images/favicon.png' type='image/x-icon' />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=.07">

    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.js"></script>-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.10.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.js"></script>
    <link href="Styles/jqueryUI.css" rel="stylesheet" />
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/3.1.9/signalr.min.js"></script>-->


    <script src="Scripts/Common.js"></script>
    <script src="Scripts/Permissions.js"></script>
    <script src="Scripts/HitCounter.js"></script>
    <script src="Scripts/EventControl.js"></script>
    <script src="Scripts/VerifyConnection.js"></script>
    <script src="Scripts/Cookies.js"></script>
    <script src="Scripts/Login.js"></script>

    <script src="Scripts/OggleHeader.js"></script>
    <script src="Scripts/OggleSearch.js"></script>
    <script src="Scripts/OggleFooter.js"></script>
    <script src="Scripts/OggleBlog.js"></script>
    <script src="Scripts/OggleRanker.js"></script>

    <script src="Scripts/DirTree.js"></script>
    <script src="Scripts/Roles.js"></script>
    <script src="Scripts/Reports.js"></script>
    <script src="Scripts/Dashboard.js"></script>
    <script src="Scripts/LinkManipulate.js"></script>

    <script src="Scripts/FolderInfoDialog.js"></script>
    <script src="Scripts/ImageCommentDialog.js"></script>
    <script src="Scripts/ContextMenu.js"></script>
    <script src="Scripts/Carousel.js"></script>
    <script src="Scripts/IndexPage.js"></script>

    <link href="Styles/Common.css" rel="stylesheet" />
    <link href="Styles/AlbumPage.css" rel="stylesheet">
    <link href="Styles/loginDialog.css" rel="stylesheet" />
    <link href="Styles/OggleHeader.css" rel="stylesheet" />
    <link href="Styles/ContextMenu.css" rel="stylesheet" />
    <link href="Styles/Slideshow.css" rel="stylesheet" />
    <link href="Styles/Ranker.css" rel="stylesheet" />
    <link href="Styles/MoveCopyArchiveDialog.css" rel="stylesheet" />
    <link href="Styles/ImageCommentDialog.css" rel="stylesheet" />
    <link href="Styles/MetaTagDialog.css" rel="stylesheet" />
    <link href="Styles/FolderInfoDialog.css" rel="stylesheet" />

    <link href="Styles/IndexPage.css" rel="stylesheet">
    <link href="Styles/Carousel.css" rel="stylesheet">
    <link href="Styles/OggleBlog.css" rel="stylesheet" />
    <link href="Styles/Dashboard.css" rel="stylesheet" />
    <link href="Styles/ChooseBox.css" rel="stylesheet" />
</head>
<body>
    <div id="oggleHeader" class="stickyHeader boobsHeader"></div>
    <div class="threeColumnLayout">
        <div id="leftColumnArea" class="leftColumn">
            <div id="promoMessagesContainer" class="promoBox"></div>
        </div>
        <div class="middleColumn">
            <div id="divStatusMessage"></div>
            <div id="dots"></div>
            <img id="indexPageLoadingGif" class="loadingGif" src="Images/loader.gif" />
            <div id="indexMiddleColumn"></div>
        </div>
        <div id="rightColumnArea" class="rightColumn"></div>
    </div>
    <div class="footer"></div>

    <script>
        let spaPageId, dots = "", promoIdx, promoMessagesArray = new Array(),
            promoMessageRotator, promoMessageRotationSpeed = 15000, updatedGalleriesCount = 25;

        //$(document).ready(function () {
        console.log("Index $(document).ready");

        //$('#footerLastBuild').html("last build: " + lastBuild + "3");
        //$('#footerMessage').html("loading settings");

        setOggleHeader(3910, "loading");

        params = getParams();
        if (params.subdomain === undefined)
            subdomain = "index";

        if (isNullorUndefined(params.spa))
            spaPageId = 3908;
        else
            spaPageId = params.spa;

        loadOggleSettings();
        var settingsWaiter = setInterval(function () {
            if (settingsArray.ApiServer === undefined) {
                dots += "~ ";
                $('#dots').html(dots);
                //setOggleHeader(params.folder, "loading");
            }
            else {
                clearInterval(settingsWaiter);
                //$('#dots').html("*");
                checkConnection(spaPageId, "Index.html");
                let connectionVerifiedLoop = setInterval(function () {
                    if (connectionVerified) {
                        clearInterval(connectionVerifiedLoop);

                        console.log("connection verified: " + verifyConnectionCount + " calling tryHitStats");
                        tryHitStats();
                        changeFavoriteIcon("redBallon");
                        document.title = "OggleBooble";

                        verifyVisitorId(3908, "Index.html");
                        localhostBypass();

                        if (spaPageId == 3908) // boobs archive
                            indexStartup();

                        if (spaPageId == 3909)// porn
                            pornStartup();

                        if (spaPageId == 72) // every playboy centerfold
                            playboyStartup();

                        if (spaPageId == 3907) { // ranker
                            rankerStartup(params.bp);
                        }
                        if (spaPageId == 3910)   // dashboard
                            dashboardStartup();
                        
                        if (spaPageId == 3911)  // "blog"
                            blogStartup();
                    }
                }, 300);

            }
        });
        window.addEventListener("resize", resizeIndexPage);
        resizeIndexPage();
    </script>
</body>
</html>
