<!DOCTYPE html>
<html lang="en">
<head>
    <title>OggleHtml</title>
    <link rel='shortcut icon' href='Images/favicon.png' type='image/x-icon' />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=.07">

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.11.1/jquery-ui.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.js"></script>
    <link href="Styles/jqueryUI.css" rel="stylesheet" />

    <script src="Scripts/Common.js"></script>
    <script src="Scripts/HitCounter.js"></script>
    <script src="Scripts/EventControl.js"></script>
    <script src="Scripts/IndexPage.js"></script>
    <script src="Scripts/Cookies.js"></script>
    <script src="Scripts/Login.js"></script>
    <script src="Scripts/VerifyConnection.js"></script>
    <script src="Scripts/OggleHeader.js"></script>
    <script src="Scripts/OggleSearch.js"></script>
    <script src="Scripts/OggleFooter.js"></script>
    <script src="Scripts/Permissions.js"></script>
    <script src="Scripts/DirTree.js"></script>
    <script src="Scripts/FeedbackDialog.js"></script>
    <script src="Scripts/FolderInfoDialog.js"></script>
    <script src="Scripts/ImageCommentDialog.js"></script>
    <script src="Scripts/MetaTagDialog.js"></script>
    <script src="Scripts/LinkManipulate.js"></script>
    <script src="Scripts/ContextMenu.js"></script>
    <script src="Scripts/Slideshow.js"></script>
    <script src="Scripts/Album.js"></script>

    <link href="Styles/Common.css" rel="stylesheet" />
    <link href="Styles/AlbumPage.css" rel="stylesheet">
    <link href="Styles/loginDialog.css" rel="stylesheet" />
    <link href="Styles/OggleHeader.css" rel="stylesheet" />
    <link href="Styles/ContextMenu.css" rel="stylesheet" />
    <link href="Styles/Slideshow.css" rel="stylesheet" />
    <link href="Styles/MoveCopyArchiveDialog.css" rel="stylesheet" />
    <link href="Styles/ImageCommentDialog.css" rel="stylesheet" />
    <link href="Styles/MetaTagDialog.css" rel="stylesheet" />
    <link href="Styles/FolderInfoDialog.css" rel="stylesheet" />
</head>
<body>
    <div id="oggleHeader" class="stickyHeader boobsHeader"></div>
    <img id="imagePageLoadingGif" class="loadingGif" src="Images/loader.gif" />
    <div id="dots"></div>
    <div class="threeColumnLayout">
        <div class="leftColumn">
            <img id='folderCommentButton' class='folderCommentButton' title='folder comment' src='/Images/comment.png' />
            <div id="folderCommentContainer"></div>
        </div>
        <div class="middleColumn">
            <div id="divStatusMessage"></div>
            <div id="albumPageHeader" class="aboveImageContainerDiv">
                <div id='seoPageName' class="albumPageMetaTitle"></div>
                <div id="aboveImageContainerMessageArea" class="flexboxMiddleSection"></div>
                <div id="deepSlideshowButton" class='deepSlideshow'
                     title='slideshow includes all child folders'
                     onclick='launchDeepSlideShow();'>gallery slideshow</div>
            </div>
            <div id="imageContainer" class="galleryContainer"></div>
            <div id="slideShowContainer" class="fullScreenViewer"></div>
            <div id="galleryBottomfileCount" class="countContainer"></div>
            <div id="trackbackContainer" class="trackbackLinkContainer"><div>trackback links</div><div id="trackbackLinkArea" class="trackbackArea"></div></div>
        </div>
        <div class="rightColumn">
            <div id="feedbackButton" class="floatingFeedbackButton">feedback</div>
        </div>
    </div>

    <script type="text/javascript">
        var _Hasync = _Hasync || [];
        _Hasync.push(['Histats.start', '1,4458214,4,0,0,0,00010000']);
        _Hasync.push(['Histats.fasi', '1']);
        _Hasync.push(['Histats.track_hits', '']);
        (function () {
            var hs = document.createElement('script'); hs.type = 'text/javascript'; hs.async = true;
            hs.src = ('//s10.histats.com/js15_as.js');
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(hs);
        })();</script>
    <noscript><a href="/" target="_blank"><img src="//sstatic1.histats.com/0.gif?4458214&101" alt="traffic analysis" border="0"></a></noscript>

    <div class="footer"></div>
    <script>
        //This page uses the non standard property “zoom”. Consider using calc() in the relevant property values, or using “transform” along with “transform-origin: 0 0”. album.html
        $(document).ready(function () {
            $('#deepSlideshow').hide();
            $('#imageContainer').hide();
            params = getParams();
            if (isNullorUndefined(params.folder)) {
                window.location.href = "Index.html";
            }
            resizeAlbumPage();
            setOggleHeader(params.folder, "loading");
            var dots = "";
            loadOggleSettings();
            var waiter = setInterval(function () {
                if (settingsArray.ApiServer === undefined) {
                    dots += "~ ";
                    $('#dots').html(dots);
                }
                else {
                    clearInterval(waiter);
                    checkFor404("Album.html");
                    var waiter2 = setInterval(function () {
                        if (!connectionVerified) {
                            dots += "~ ";
                            $('#dots').html(dots);
                        }
                        else {
                            clearInterval(waiter2);
                            $('#dots').html('');
                            changeFavoriteIcon("redBallon");
                            localhostBypass();

                            if (!isNullorUndefined(params.tic)) {
                                logStaticPageHit(params.folder, "album");
                                window.location.href = "album.html?folder=" + params.folder;
                            }
                            else {
                                let visitorId = getCookieValue("VisitorId");
                                if (isNullorUndefined(visitorId))
                                    getIpInfo(params.folder, "album");
                            }

                            loadAlbum(params.folder);
                            //if (isInRole("NewUser")) {
                        }
                    }, 300);
                }
            }, 300);

            window.addEventListener("resize", resizeAlbumPage);
            resizeAlbumPage();

            $('#feedbackButton').on("click", function () {
                showFeedbackDialog(params.folder);
            });

        });

        //This page uses the non standard property “zoom”. Consider using calc() in the relevant property values, or using “transform” along with “transform-origin: 0 0”. album.html
        function resizeAlbumPage() {
            // set page width
            //let winW = $(window).width();
            //let lcW = $('.leftColumn').width(), rcW = $('.rightColumn').width();
            $('.threeColumnLayout').css("width", $(window).width());
            //$('.middleColumn').width(winW - lcW - rcW);
            //$('#imageContainer').width($('.middleColumn').width());

            //set page height
            let winH = $(window).height();
            let headerH = $('#oggleHeader').height();
            $('.threeColumnLayout').css("height", winH - headerH);
            $('.middleColumn').css("height", winH - headerH);
            $('#imageContainer').css("max-height", $('.middleColumn').height() - 50);

            if (viewerShowing)
                resizeViewer();
        }
    </script>
</body>
</html>