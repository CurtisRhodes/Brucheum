<!DOCTYPE html>
<html lang="en">
<head>
    <title>OggleHtml</title>
    <link rel='shortcut icon' href='Images/favicon.png' type='image/x-icon' />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=.07">

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.11.1/jquery-ui.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.js"></script>
    <link href="Styles/jqueryUI.css" rel="stylesheet" />

    <script src="Scripts/Common.js"></script>
    <script src="Scripts/HitCounter.js"></script>
    <script src="Scripts/EventControl.js"></script>
    <script src="Scripts/IndexPage.js"></script>
    <script src="Scripts/Cookies.js"></script>
    <script src="Scripts/Login.js"></script>
    <script src="Scripts/VerifyConnection.js"></script>
    <script src="Scripts/OggleHeader.js"></script>
    <script src="Scripts/OggleSearch.js"></script>
    <script src="Scripts/OggleFooter.js"></script>
    <script src="Scripts/Permissions.js"></script>
    <script src="Scripts/DirTree.js"></script>
    <script src="Scripts/FeedbackDialog.js"></script>
    <script src="Scripts/FolderInfoDialog.js"></script>
    <script src="Scripts/ImageCommentDialog.js"></script>
    <script src="Scripts/MetaTagDialog.js"></script>
    <script src="Scripts/LinkManipulate.js"></script>
    <script src="Scripts/ContextMenu.js"></script>
    <script src="Scripts/Slideshow.js"></script>
    <script src="Scripts/Album.js"></script>

    <link href="Styles/Common.css" rel="stylesheet" />
    <link href="Styles/AlbumPage.css" rel="stylesheet">
    <link href="Styles/loginDialog.css" rel="stylesheet" />
    <link href="Styles/OggleHeader.css" rel="stylesheet" />
    <link href="Styles/ContextMenu.css" rel="stylesheet" />
    <link href="Styles/Slideshow.css" rel="stylesheet" />
    <link href="Styles/MoveCopyArchiveDialog.css" rel="stylesheet" />
    <link href="Styles/ImageCommentDialog.css" rel="stylesheet" />
    <link href="Styles/MetaTagDialog.css" rel="stylesheet" />
    <link href="Styles/FolderInfoDialog.css" rel="stylesheet" />
</head>
<body>
    <div id="oggleHeader" class="stickyHeader boobsHeader"></div>
    <img id="imagePageLoadingGif" class="loadingGif" src="Images/loader.gif" />
    <div id="dots"></div>
    <div class="threeColumnLayout">
        <div class="leftColumn">
            <img id='folderCommentButton' class='folderCommentButton' title='folder comment' onclick='showFolderCommentDialog()' src='/Images/comment.png' />
            <div id="folderCommentContainer"></div>
        </div>
        <div class="middleColumn">
            <div id="divStatusMessage"></div>
            <div id="albumPageHeader" class="aboveImageContainerDiv">
                <div id='seoPageName' class="albumPageMetaTitle"></div>
                <div id="aboveImageContainerMessageArea" class="flexboxMiddleSection"></div>
                <div id="deepSlideshowButton" class='deepSlideshow'
                     title='slideshow includes all child folders'
                     onclick='launchDeepSlideShow();'>gallery slideshow</div>
            </div>
            <div id="imageContainer" class="galleryContainer"></div>
            <div id="slideShowContainer" class="fullScreenViewer"></div>
            <div id="galleryBottomfileCount" class="countContainer"></div>
            <div id="trackbackContainer" class="trackbackLinkContainer"><div>trackback links</div><div id="trackbackLinkArea" class="trackbackArea"></div></div>
        </div>
        <div class="rightColumn">
            <div id="feedbackBanner" class="fixedMessageButton">feedback</div>
        </div>
    </div>
    <div class="footer"></div>
    <script>
        //This page uses the non standard property “zoom”. Consider using calc() in the relevant property values, or using “transform” along with “transform-origin: 0 0”. album.html
        $(document).ready(function () {
            $('#deepSlideshow').hide();
            $('#imageContainer').hide();            
            params = getParams();
            if (params.folder == undefined) {
                window.location.href = "Index.html";
            }
            resizeAlbumPage();
            setOggleHeader(params.folder, "loading");
            var dots = "";
            loadOggleSettings();
            var waiter = setInterval(function () {
                if (settingsArray.ApiServer === undefined) {
                    dots += "~ ";
                    $('#dots').html(dots);
                }
                else {
                    clearInterval(waiter);
                    checkFor404("Album.html");
                    var waiter2 = setInterval(function () {
                        if (!connectionVerified) {
                            dots += "~ ";
                            $('#dots').html(dots);
                        }
                        else {
                            clearInterval(waiter2);
                            $('#dots').html('');
                            changeFavoriteIcon("redBallon");

                            verifiyVisitor("album", params.folder);

                            if (isInRole("NewUser")) {
                                loadAlbum(params.folder);
                            }
                            else {
                                //directToStaticPage(params.folder);
                                //alert("document.domain: " + document.domain);
                                loadAlbum(params.folder);
                            }
                        }
                    }, 300);
                }
            }, 300);

            window.addEventListener("resize", resizeAlbumPage);
            resizeAlbumPage();

            $('#feedbackBanner').on("click", function () {
                showFeedbackDialog(params.folder);
            });

        });
        function resizeAlbumPage() {
            var visH = $(window).height() - $('#oggleHeader').height();
            $('.threeColumnLayout').css("min-height", visH);
            $('#feedbackBanner').css("top", visH - 100);
            $('.middleColumn').css("min-height", visH);


            //$('#aboveImageContainerMessageArea').html("resize: visH: " + visH + "  col: " + $('.threeColumnLayout').height() + "  con: " + $('#imageContainer').height());
        }

    </script>
</body>
</html>