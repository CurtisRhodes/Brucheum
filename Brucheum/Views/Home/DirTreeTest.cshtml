
@{
    ViewBag.Title = "DirTreeTest";
}

<link href="~/Styles/ThreeColumnPage.css" rel="stylesheet" />
<style>
    #loadingGif {
        position: relative;
        top: 150px;
        left: 450px;
        display: none;
    }
</style>


<div class="threeColumnArray">
    <div id="leftColumn">
    </div>
    <div id="middleColumn">
        <h2>DirTree Test</h2>
        <div id="loadingGif">
            <img src="~/Images/loader.gif" height="120" />  @*"~/Images/ingranaggi3.gif"*@
        </div>
        <button id="btnLoadDb" class="roundendButton">Load Db</button>
    </div>
    <div id="rightColumn">
    </div>
</div>
<script src="~/Scripts/ResizeThreeColumnPage.js"></script>



<script>
    var service = '@ViewBag.Service';

    $('#btnLoadDb').click(function () {
        //var danni = "http://curtisrhodes.com/picture_library/Danni";
        try {
            $('#loadingGif').show();
            $.ajax({
                type: "get",
                url: service + "/api/directory/?root=danni",
                success: function (response) {
                    $('#loadingGif').hide();
                    //if (success === "ok")
                    alert(response);
                },
                error: function (xhr) {
                    $('#loadingGif').hide();
                    //displayStatusMessage("alert-danger", "error: " + xhr.statusText);
                    alert("Load Db error: " + xhr.responseText);
                }
            });
        } catch (e) {
            $('#loadingGif').hide();
            alert("Load Db catch: " + e);
        }
    })
    
</script>