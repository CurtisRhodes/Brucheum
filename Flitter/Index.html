<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Flitter</title>
    <script src="https://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <link rel="icon" href="/Images/happyMan.gif" type="image/x-icon">
    <link href="Css/Flitter.css" rel="stylesheet" />
    <script src="Scripts/Common.js"></script>

    <style>
    </style>

</head>
<body>
    <div w3-include-html="FlitterHeader.html"></div>
    <div class="threeColumnLayout">
        <div class="leftColumn"></div>
        <div class="middleColumn">
            <div class="flitterPannelsContainer">
                <div id="pannelZero" class="flitterPannel">
                    <div class="flitterPannelLeftColumn">
                        <img id="pannelZeroCollapse" state="closed" onclick="pannelZeroToggle()" class="flitterPannelIcon" src="Images/man-arms-folded.png" />
                        <img id="pannelZeroCollapse" onclick="pannelZeroSettings()" class="flitterPannelIcon" src="Images/settingGear.png" />
                        <img class="flitterPannelIcon" src="Images/happyMan.png" />
                        <img class="flitterPannelIcon" src="Images/happyMan.png" />
                    </div>
                    <div class="flitterPannelContentArea">

                        <div id="divSettings" class="settingsConsole">
                            <div class="settingsConsoleHeader">SETTINGS</div>
                            <div id="divSettingsContainer" class="settingsConsoleInputsContainer"></div>
                            <div><button onclick="updateXML()">Save</button></div>
                        </div>

                    </div>

                </div>
                <div id="pannelOne" class="flitterPannel">
                    <div class="flitterPannelLeftColumn">

                        <a href="Album.html?folderId=234&kkk=333">234</a>


                    </div>

                    <div class="flitterPannelContentArea">

                        <a href="Album.html?folderId=234&kkk=333">23ddd4</a>


                    </div>
                </div>
                <div id="pannelTwo" class="flitterPannel">
                    <div class="flitterPannelLeftColumn"></div>
                    <div class="flitterPannelContentArea"></div>
                </div>
            </div>

        </div>
        <div class="rightColumn"></div>
    </div>
    <div w3-include-html="FlitterFooter.html"></div>

    <script>

        $(document).ready(function () {
            includeHTML();
            resizePage();
            $('#divSettings').hide();
            setFlitterPanels()
        });

        function setFlitterPanels() {
            $('#pannelOne .flitterPannelContentArea').css('padding', '24');
            $('#pannelOne .flitterPannelContentArea').html("Left: " + $('#pannelOne').css('left'));
        }

        function pannelZeroSettings() {
            getXmlSettings();
            //<notebooks>
            //  <notebook name="Birds"></notebook>
            //  <notebook name="Hot Talkers"></notebook>
            //  <notebook name="Books"></notebook>
            //  <notebook name="Tennis"></notebook>
            //</notebooks>
            if ($('#pannelZeroCollapse').attr('state') == "closed") {
                $('#pannelZeroCollapse').attr('state', 'open');
                $('#pannelZeroCollapse').attr("src", "Images/happyMan.png");
                $('#pannelZero .flitterPannelContentArea').animate({ 'width': '500' }, { duration: 500, specialEasing: { width: 'linear' } });
            }

            $('#divSettings').fadeIn(1000);

        }

        function pannelZeroToggle() {
            if ($('#pannelZeroCollapse').attr('state') == "closed") {
                $('#pannelZeroCollapse').attr('state', 'open');
                $('#pannelZeroCollapse').attr("src", "Images/happyMan.png");
                $('#pannelZero .flitterPannelContentArea').animate({ 'width': '500' }, { duration: 500, specialEasing: { width: 'linear' } });
            }
            else {
                $('#divSettings').hide();
                $('#pannelZeroCollapse').attr('state', 'closed');
                $('#pannelZeroCollapse').attr("src", "Images/man-arms-folded.png");
                //$('#pannelZero .flitterPannelContentArea').css('width', '0');
                $('#pannelZero .flitterPannelContentArea').animate({ 'width': '0' }, { duration: 500, specialEasing: { width: 'linear' } });
            }
            //$('#pannelOne .flitterPannelContentArea').html($('#pannelZeroCollapse').attr('state'));
        }

        function getXmlSettings() {
            $.ajax({
                type: "GET",
                url: 'Data/flitterSettings.xml',
                dataType: "XML",
                success: function (xml) {
                    $('#divSettingsContainer').html("");
                    $(xml).find("setting").each(function () {
                        $('#divSettingsContainer').append("<div class='flitterSetting'><div class=flitterLabel>" + $(this).attr('name') + "</div><input value=" + $(this).attr('value') + " /></div>");
                    });
                }, error: function (xhr) {
                    alert("getXmlSettings xhr error: " + getXHRErrorDetails(xhr));
                }
            });
        }

        function updateXML() {
            pannelZeroToggle();
        }
    </script>

</body>
</html>